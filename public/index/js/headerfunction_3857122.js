function zhReport(e){if("undefined"==typeof YA)return!1;var e=e||{},t={pro:"huya_web",pas:YA.cookie.get("username")||"",yyuid:YA.cookie.get("yyuid")||"",pageType:"root",rso:"",rso_desc:"",eid:"",eid_desc:""},n=function(e,t,n,i,a){var o=e+"="+t+"; domain="+n+"; path="+i;a>0&&(o=o+"; expires="+a.toGMTString()),document.cookie=o};for(var i in e)t[i]=e[i];"undefined"==typeof ya&&(window.ya=new YA(t.pro,t.pas,{pageType:t.pageType,yyuid:t.yyuid}),ya.reportProductStartUp({pro:t.pro,rso:t.rso,rso_desc:t.rso_desc,ref:YA.cookie.get("ya_eid")}),ya.startProductHeartbeat({pro:t.pro,rso:t.rso,ref:YA.cookie.get("ya_eid"),rso_desc:t.rso_desc}),ya.reportProductEvent({eid:t.eid,eid_desc:t.eid_desc,rso:t.rso,rso_desc:t.rso_desc,ref:YA.cookie.get("ya_eid")}),TT.emit("reportReady"),$("body").on("click",".clickstat",function(){var e="";$(this).attr("href")&&(e=$(this).attr("eid").substring(6),n("ya_eid",e,TT.domainForWriteCookie,"/")),ya.reportProductEvent({eid:$(this).attr("eid"),eid_desc:$(this).attr("eid_desc"),ref:YA.cookie.get("ya_eid")})}),$("body").on("click",".new-clickstat",function(){var e="",t=$(this);try{var i=$.parseJSON(t.attr("report"));$(this).attr("href")&&(e=i.position,n("ya_eid",e,TT.domainForWriteCookie,"/")),i.ref=YA.cookie.get("ya_eid"),ya.reportProductEvent(i)}catch(a){}}))}function parseQueryString(e){var t,n={};if(-1!=(t=e.indexOf("?")))for(var i=e.substring(t+1,e.length),a=i.split("&"),o=[],s=0,r=a.length;r>s;s++)o=a[s].split("="),n[o[0]]=o[1];return n}window.TT={},TT.domainForWriteCookie="huya.duowan.com"==location.host?"duowan.com":"huya.com",TT.type=function(){return/^(www|hd|i|blog|help)\.huya\.com/.test(location.host)||"huya.duowan.com"==location.host?0:1}(),TT.isProd=!TT.type,TT.debug=!TT.isProd;try{localStorage.getItem("TT_DEBUG")&&(TT.debug=!0)}catch(e){}TT.log=function(){if(TT.debug)try{return console.log.apply(console,arguments)}catch(e){}},TT.app={main:window.APP_URL||"http://"+(TT.isProd?"":"test.")+"www.huya.com/",i:"http://"+(TT.isProd?"":"test.")+"i.huya.com/"},TT.use$=function(){var e=[],t=function(){return window.jQuery},n=t(),i=null;return n||(i=setInterval(function(){if(n=t())for(clearInterval(i);e.length;)e.shift()(n)},100)),function(t){"function"==typeof t&&(n?t(n):e.push(t))}}(),!function(){var e={},t={},n=-1;e.publish=function(e){var n=arguments;t[e]||(t[e]={published:!1,data:null,subscribers:[]});var i=t[e];i.published=!0,i.data=Array.prototype.slice.call(n);for(var a=i.subscribers.length,o=null;a--;)o=i.subscribers[a],o.func.apply(o,n);return!0},e.subscribe=function(e,i,a){if("function"!=typeof i)return-1;t[e]||(t[e]={published:!1,data:null,subscribers:[]});var o=(++n).toString(),s={token:o,func:i};return t[e].subscribers.push(s),a&&t[e].published&&i.apply(s,t[e].data),o},e.unsubscribe=function(e){for(var n in t)if(t.hasOwnProperty(n))for(var i=t[n].subscribers,a=0,o=i.length;o>a;a++){var s=i[a];if(s.token===e)return i.splice(a,1),e}return!1},TT.on=function(){e.subscribe.apply(e,arguments)},TT.off=function(){e.unsubscribe.apply(e,arguments)},TT.emit=function(){e.publish.apply(e,arguments)},window.DUYA_SUB=e}(),!function(e){e.HUYA_UTIL={trim:function(e){var t=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;return(e||"").replace(t,"")},xssFilter:function(e){return"string"!=typeof e?e:e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},createStyleSheet:function(e){var t;return document.createStyleSheet?(t=document.createStyleSheet(),t.cssText=e):(t=document.createElement("style"),t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)),t},deleteCookie:function(e,t,n){if(this.hasCookie(e)){var i=new Date;i.setTime(i.getTime()-864e5),document.cookie=e+"=_; expires="+i.toGMTString()+"; domain="+t+"; path="+n}},writeCookie:function(e,t,n,i,a){var o=e+"="+t+"; domain="+n+"; path="+i;a>0&&(o=o+"; expires="+a.toGMTString()),document.cookie=o},hasCookie:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t)return!0}return!1},getCookieVal:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n+=1){var i=t[n].split("=");if(i[0]==e)return decodeURIComponent(i[1])}return""},getScript:function(e,t){function n(){o.onload=o.onreadystatechange=null,o=null,"function"==typeof t&&t()}var i=document,a=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=i.createElement("script");"onload"in o?o.onload=n:o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()},o.charset="utf-8",o.type="text/javascript",o.async=!0,o.src=e,a.appendChild(o)},throttle:function(e,t){function n(){o=arguments,s=this,a||(a=setTimeout(function(){a=null,e.apply(s,o),s=o=null},i?0:t),i&&(i=!1))}var i=!0,a=null,o=null,s=null;return n.cancel=function(){clearTimeout(a),a=s=o=null},n},debounce:function(e,t,n){var i=null,a=function(){i&&clearTimeout(i);var a=this,o=arguments;return n?(i||e.apply(a,o),i=setTimeout(function(){i=null},t)):i=setTimeout(function(){i=null,e.apply(a,o)},t),a};return a.cancel=function(){clearTimeout(i),i=null},a}}}(window),!function(e){function t(){e.isSupportWebp=!0}e.webpReg=/\/yysnapshot\//,e.webpSuffix="/format/webp",e.isSupportWebp=!1;var n=new Image;n.onload=function(){1==n.width&&t()},n.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA=="}(window),!function(e,t){e.huya_crossStorage=TT.store=t()}(this,function(){function e(e,t,n){var i={sign:c,type:e,data:t};if("function"==typeof n){var a="cs_"+(new Date).getTime();i.token=a,s[a]=n}try{i=JSON.stringify(i)}catch(r){return}o(function(e){e.postMessage(i,"*")})}function t(e){if(/\.huya\.com$/.test(e.origin)){var t=null;try{t=JSON.parse(e.data)}catch(n){}if(t&&t.sign===c&&t.token)if("STORE_CHANGE"===t.token)for(var i=0,a=r.length;a>i;i++)r[i](t.data);else s[t.token](t.data)}}var n={setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){},change:function(){}},i="postMessage"in window,a="localStorage"in window;if(!i)return a&&(n=localStorage),n;var o=function(){var e=null,t=null,n=!1,i=[],a=function(){n=!0,t=e.contentWindow;for(var a=0,o=i.length;o>a;a++)i[a](t)};return function(o){e||(e=document.createElement("iframe"),e.style.display="none",document.body.insertBefore(e,document.body.firstChild),e.attachEvent?e.attachEvent("onload",a):e.onload=a,e.src="http://hd.huya.com/proxy/storage.html"),"function"==typeof o&&(n?o(t):i.push(o))}}(),s={},r=[],c="CROSS_STORAGE";return"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t),n.setItem=function(t,n){if("string"==typeof t){var i={};i[t]=n,e("set",i)}},n.getItem=function(t,n){"string"==typeof t&&e("get",t,n)},n.removeItem=function(t){"string"==typeof t&&e("del",t)},n.clear=function(){e("del")},n.change=function(e){"function"==typeof e&&(r.push(e),o())},n}),TT.use$(function(e){function t(){this.initialize.apply(this,arguments)}t.prototype={initialize:function(){var t=null,n=this;if(t=window.localStorage.getItem("header/ads"))try{t=JSON.parse(t),n.createImage(t)}catch(i){}e(window).on("load",function(){setTimeout(function(){n.ajaxGetAds()},500)})},createImage:function(t){e("#J_duyaHdGg").html('<a href="'+t.link+'" title="'+t.title+'" target="_blank"><img src="'+t.picUrl+'" alt="'+t.title+'" /></a>')},ajaxGetAds:function(){var t=TT.app.main+"/cache10min.php?m=Ad&do=ajaxGetAds&type=4&area=24&num=1";e.ajax({url:t,dataType:"jsonp",jsonpCallback:"huyaNavAd",cache:!0}).done(function(e){if(1e3==e.status)if(e.data&&e.data.length){var t=e.data[0];window.localStorage.setItem("header/ads",JSON.stringify(t))}else window.localStorage.removeItem("header/ads");else window.localStorage.removeItem("header/ads"),TT.log("\u83b7\u53d6\u5934\u90e8\u5e7f\u544a\u6570\u636e\u5931\u8d25\uff1a"+e.msg)})}},DUYA_SUB.subscribe("huyaHeaderDomReady",function(){new t},!0)}),!function(){function e(e){var n=document.body.className.replace(/(^[\s\t\xa0\u3000]+|[\s\t\xa0\u3000]+$)/g,""),i=n?document.body.className.split(/\s+/):[],a=t(i,"w-1000");1===e?-1!=a&&(i.splice(a,1),document.body.className=i.join(" ")):-1==a&&(i.push("w-1000"),document.body.className=i.join(" "))}var t=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},n=document.documentElement?document.documentElement:document.body,i=function(){var e=n.clientWidth;return e>=1480?1:0},a=i();e(a);var o=null,s=function(){clearTimeout(o),o=setTimeout(function(){var t=i();t!==a&&e(a=t)},60)};window.addEventListener?window.addEventListener("resize",function(){s(),DUYA_SUB.publish("resizeWide",n.clientWidth)},!1):window.attachEvent&&window.attachEvent("onresize",function(){s(),DUYA_SUB.publish("resizeWide",n.clientWidth)})}(),TT.use$(function($){function huyaZoom(){var huya_zoom={cookieVal:"1",isPop:!1,init:function(){var e=this;this.pop(),$(window).on("resize",function(){e.detect()&&e.pop()})},detect:function(){return this.ua=navigator.userAgent.toLowerCase(),-1==this.ua.indexOf("windows")?!1:!HUYA_UTIL.getCookieVal("zoomtip")},cal:function(){var e=0,t=window.screen;return void 0!==window.devicePixelRatio?e=window.devicePixelRatio:~this.ua.indexOf("msie")?t.deviceXDPI&&t.logicalXDPI&&(e=t.deviceXDPI/t.logicalXDPI):void 0!==window.outerWidth&&void 0!==window.innerWidth&&(e=window.outerWidth/window.innerWidth),e&&(e=Math.round(100*e)),99!==e&&101!==e||(e=100),e},resize:function(){var e=this.cal();if(this.isPop&&e&&100==e)return this.close();var t=500,n=364,i=100*t/e,a=100*n/e;$(".pop-zoom-container").css({width:i+"px",height:a+"px",marginLeft:-i/2+"px",marginTop:-a/2+"px"})},pop:function(){var ratio=this.cal();if(!this.isPop&&100!==ratio){var sHtml=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+='<div class="pop-zoom-container">\r\n    <div class="pop-zoom">\r\n        <img class="pop-zoom-bg" src="'+(null==(__t="http://a.dwstatic.com/huya/main/img/header/tip/zoom_pic2_da137ae.jpg")?"":__t)+'">\r\n        <div class="pop-zoom-close">close</div>\r\n        <div class="pop-zoom-hide">\r\n            <img class="pop-zoom-hide-uncheck on" src="'+(null==(__t="http://a.dwstatic.com/huya/main/img/header/tip/zoom-hide-uncheck_1f545a4.png")?"":__t)+'">\r\n            <img class="pop-zoom-hide-checked" src="'+(null==(__t="http://a.dwstatic.com/huya/main/img/header/tip/zoom-hide-checked_1bd1092.png")?"":__t)+'">\r\n        </div>\r\n    </div>\r\n</div>';return __p};$("body").append(sHtml),this.bindEvt(),this.isPop=!this.isPop}this.resize()},close:function(){var e=new Date;e.setTime(e.getTime()+864e5),$(".pop-zoom-hide-checked").hasClass("on")&&HUYA_UTIL.writeCookie("zoomtip",this.cookieVal,TT.domainForWriteCookie,"/",e),$(".pop-zoom-container").remove(),this.isPop=!this.isPop},bindEvt:function(){var e=this;$(".pop-zoom-close").on("click",function(){e.close()}),$(".pop-zoom-hide").on("click",function(){$(this).find(".on").removeClass("on").siblings().addClass("on")})}};return huya_zoom}var huya_zoom=huyaZoom();huya_zoom.detect()&&huya_zoom.init()}),TT.use$(function(e){function t(){this.initialize.apply(this,arguments)}t.prototype={initialize:function(){var t=null,n=this;if(n.input=e("#searchForm_id input"),t=window.localStorage.getItem("header/placeholder"))try{n.setVal(t)}catch(i){}e(window).on("load",function(){setTimeout(function(){n.ajaxGetPlaceholder()},500)})},setVal:function(e){this.val=e,this.input.val(this.val),this.bind()},ajaxGetPlaceholder:function(){e.ajax({type:"get",url:TT.app.main+"/cache10min.php?m=Search&do=getHotword&v=2",dataType:"jsonp",jsonpCallback:"huyaNavPlaceholder",cache:!0}).done(function(e){e&&e[0]?window.localStorage.setItem("header/placeholder",e[0]):window.localStorage.removeItem("header/placeholder")})},bind:function(){var e=this;e.input.on("focus",function(){e.input.val()===e.val&&e.input.val("")}).on("blur",function(){""===e.input.val()&&e.input.val(e.val)})}},DUYA_SUB.subscribe("huyaHeaderDomReady",function(){new t},!0)}),TT.use$(function($){var host=TT.app.main,follow={init:function(){var e=this,t=HUYA_UTIL.getCookieVal("yyuid");t&&$.ajax({url:"http://fw.huya.com/dispatch?do=livesubscribe&uid="+t,type:"GET",dataType:"jsonp"}).done(function(t){1e3==t.status&&e.tpl(t.result&&t.result.list&&t.result.list.length?t.result.list:[])})},tpl:function(list1){for(var tpl=function(obj){function formatNumber(e){var t=Number(e);return t&&t>1e4&&(e=(t/1e4).toFixed(1)+"\u4e07"),e}var __t,__p="";with(Array.prototype.join,obj||{})__p+="",__p+='\r\n\r\n<li>\r\n	<a class="video-link" href="'+(null==(__t=link)?"":__t)+'" title="'+(null==(__t=nick)?"":__t)+'">\r\n        <span class="avatar"><img src="'+(null==(__t=avatar180)?"":__t)+'" alt="'+(null==(__t=nick)?"":__t)+'" /></span>\r\n        <div class="info">\r\n            <p class="name">'+(null==(__t=nick)?"":__t)+'</p>\r\n            <div class="other">\r\n                <span class="count"><i></i>'+(null==(__t=formatNumber(totalCount))?"":__t)+'</span>\r\n                <span class="game">'+(null==(__t=gameFullName)?"":__t)+"</span>\r\n            </div>\r\n        </div>\r\n	</a>\r\n</li>\r\n\r\n";return __p},_tpl="",_navSubDom=$(".nav-subscribe"),_subCount=list1.length,maxLegth=5,list1=list1.slice(0,maxLegth),i=0;i<list1.length;i++)_tpl+=tpl({link:host+(list1[i].privateHost||list1[i].yyid),screenshot:list1[i].screenshot,avatar180:list1[i].avatar180,gameFullName:list1[i].gameFullName,nick:list1[i].nick,totalCount:list1[i].totalCount});_subCount>0?(_navSubDom.find(".subscribe-hd").show(),_navSubDom.find(".subscribe-bd").show(),_navSubDom.find(".subscribe-list").append(_tpl),_navSubDom.find(".subscribe-key").text(_subCount),_navSubDom.find(".mod-list-more").hide(),_subCount>maxLegth?_navSubDom.find(".subscribe-all").show():_navSubDom.find(".subscribe-all").hide()):(_navSubDom.find(".subscribe-bd").show(),_navSubDom.find(".more-loading").hide(),_navSubDom.find(".more-empty").show(),_navSubDom.find(".subscribe-all").hide())}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){$("#duya-header .nav-subscribe").one("mouseenter",function(){follow.init()})},!0)}),TT.use$(function(e){var t={init:function(){var t=this;e.ajax({type:"get",url:TT.app.main+"/cache10min.php?m=Game&do=ajaxNavGame",dataType:"jsonp",jsonpCallback:"huyaNavCategory",cache:!0}).done(function(n){var i="";i=n&&1e3==n.status&&n.result?t.tpl(n.result):'<a href="'+TT.app.main+'g" class="nav-expand-game-more" target="_blank">\u66f4\u591a <span>&gt;</span></a>',e(".nav-expand-game").append(i)})},tpl:function(e){var t="",n=e.hot,i=e.user,a=e.ad,o=0;if(n.length>0){t+='<dl class="clearfix"><dt>\u70ed\u95e8\u5206\u7c7b</dt>';for(var s=0,r=n.length;r>s;s++)o++,t+='<dd><a class="clickstat" eid="click/navi/game/game'+o+'" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6e38\u620f/\u6e38\u620f'+o+'" title="'+n[s].name+'" href="'+TT.app.main+"g/"+n[s].host+'" target="_blank">'+n[s].name+"</a></dd>";t+="</dl>"}if(i.length>0){t+='<dl class="clearfix"><dt>\u73a9\u5bb6\u63a8\u8350</dt>';for(var s=0,r=i.length;r>s;s++)o++,t+='<dd><a class="clickstat" eid="click/navi/game/game'+o+'" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6e38\u620f/\u6e38\u620f'+o+'" title="'+i[s].name+'" href="'+TT.app.main+"g/"+i[s].host+'" target="_blank">'+i[s].name+"</a></dd>";t+="</dl>"}return t+='<a href="'+TT.app.main+'g" class="nav-expand-game-more" target="_blank">\u66f4\u591a <span>&gt;</span></a>',a&&(t+='<a href="'+a.link+'" class="clickstat" eid="click/push/navigame" eid_desc="\u70b9\u51fb/\u63a8\u8350/\u5bfc\u822a\u6e38\u620f\u4e0b\u62c9\u56fe" target="_blank"><img src="'+a.picUrl+'" width="250" height="60" alt="'+a.title+'"/></a>'),t}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){var n=!1,i=null;e(window).on("load",function(){n||(i=setTimeout(function(){t.init(),n=!0},500))}),e("#nav-main").one("mouseover",function(){n||(i&&clearTimeout(i),t.init(),n=!0)})},!0)}),TT.use$(function(e){var t=HUYA_UTIL.getCookieVal,n=!!t("yyuid"),i={init:function(){var i=this,a=e(".load-history");if(n)e.ajax({type:"get",url:"http://fw.huya.com/dispatch",data:{"do":"userHistory",uid:t("yyuid"),guid:t("guid"),token:t("udb_n"),page:1,pageSize:5},dataType:"jsonp",cache:!0}).done(function(e){var t=i.tpl(e&&1e3==e.status?e.result:null);a.html(t)});else{var o="huya_watchHistory";huya_crossStorage.getItem(o,function(e){e&&(e.nowTime=Math.floor(new Date/1e3)),a.html(i.tpl(e))}),huya_crossStorage.change(function(e){(e.key===o||null===e.key)&&huya_crossStorage.getItem(o,function(e){e&&(e.nowTime=Math.floor(new Date/1e3)),a.html(i.tpl(e))})})}},tpl:function(t){var n="";if(t&&t.historyList.length>0){for(var i=t.historyList,a=new Date(1e3*+t.nowTime),o=a.setHours(0,0,0,0),s={today:[],yesterday:[],earlier:[]},r=0;r<i.length;r++)i[r].historyTime=1e3*i[r].historyTime,i[r].historyTime>o?s.today.push(i[r]):o-i[r].historyTime<864e5?s.yesterday.push(i[r]):s.earlier.push(i[r]);var c={today:"\u4eca\u5929",yesterday:"\u6628\u5929",earlier:"\u66f4\u65e9"},l={1:"pc",2:"phone",3:"web"};for(var u in s){var d=s[u];if(d.length>0){n+='<div class="history-hd"><em></em>'+c[u]+"</div>",n+='<ul class="history-bd">';for(var r=0;r<d.length;r++)n+="<li>",n+=1==d[r].isLive?'<a href="http://www.huya.com/'+d[r].privateHost+'" title="'+d[r].nick+'"><em class="live"></em><span class="history-nick">'+d[r].nick+'</span><span class="history-type" title="'+d[r].gameName+'">'+d[r].gameName+"</span></a>":'<em class="'+l[d[r].source]+'"></em><span class="history-nick">'+d[r].nick+'</span><span class="history-type" title="'+d[r].gameName+'">'+d[r].gameName+"</span>",n+="</li>";n+="</ul>"}}i.length>=5&&e(".nav-expand-history-more").css("display","block")}else n='<p class="nav-expand-history-null"><i></i><span>\u6700\u8fd1\u60a8\u6ca1\u6709\u89c2\u770b\u8bb0\u5f55</span></p>';return n}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){e("#nav-history").one("mouseover",function(){i.init()}).on("click",function(e){n||e.preventDefault()})},!0)}),!function(){var html=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-login-box" id="J_huyaLoginBox">\r\n    \r\n\r\n\r\n<div class="login-box">\r\n    <div class="login">\r\n        <div class="login-main">\r\n            <div class="login-hd">\r\n                <a class="tab-btn">\u767b\u5f55</a>\r\n                <a class="tab-btn">\u6ce8\u518c</a>\r\n                <i class="line J_line"></i>\r\n            </div>\r\n            <div class="login-bd">\r\n                <div class="login-content">\r\n                    <div class="tab-unit">\r\n                        <div id="login-tab">\r\n                            <h2 class="login-title">\u5e10\u53f7\u767b\u5f55</h2>\r\n                            <div id="udbsdk_login_content"></div>   \r\n                        </div>\r\n                    </div>\r\n                    <div class="tab-unit">\r\n                        <div class="register-tab">               \r\n                            <iframe frameborder="0" scrolling="no" allowtransparency="true" height="370"></iframe>\r\n                            <!-- <div><a class="reg-by-mail" href="#">\u4f7f\u7528\u90ae\u7bb1\u6ce8\u518c&gt;</a></div> -->\r\n                        </div>\r\n                        <div class="register-tab">\r\n                            <iframe frameborder="0" scrolling="no" allowtransparency="true" height="370"></iframe>\r\n                            <div><a class="reg-by-phone" href="#">\u4f7f\u7528\u624b\u673a\u6ce8\u518c&gt;</a></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <i class="login-loading J_loading"></i>\r\n            </div>\r\n        </div>\r\n        <div class="login-sidebar">\r\n            <h2 class="title">\u5408\u4f5c\u8d26\u53f7\u767b\u5f55</h2>\r\n            <div class="other-login">\r\n                <a class="login-btn login-btn-wechat clickstat" eid="click/nav/weixinlogin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u5fae\u4fe1\u8d26\u53f7\u767b\u5f55"><i class="icon"></i>\u5fae\u4fe1\u5e10\u53f7\u767b\u5f55</a>\r\n                <a class="login-btn login-btn-qq hiido_stat clickstat" hiido_code="10003435" eid="click/nav/qqlogin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/QQ\u8d26\u53f7\u767b\u5f55" login-type="qq"><i class="icon"></i>QQ\u5e10\u53f7\u767b\u5f55</a>\r\n                <a class="login-btn login-btn-weibo hiido_stat clickstat" hiido_code="10003437" eid="click/nav/weibologin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u65b0\u6d6a\u5fae\u535a\u767b\u5f55" login-type="weibo"><i class="icon"></i>\u5fae\u535a\u5e10\u53f7\u767b\u5f55</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <a class="close" title="\u5173\u95ed"></a>\r\n    <p class="login-wran-tip">\u4f7f\u7528\u5373\u4e3a\u540c\u610f\u300a<a class="warn-link" href="http://zc.yy.com/license.html" target="_blank" title="\u7528\u6237\u670d\u52a1\u534f\u8bae">\u7528\u6237\u670d\u52a1\u534f\u8bae</a>\u300b</p>\r\n</div>\r\n<div class="account-login-mask"></div>\r\n\r\n\r\n\r\n</div>\r\n';return __p}(),box={init:function(){$("body").append(html),this.view=$("#J_huyaLoginBox"),this.bind()},bind:function(){var e=this;this.view.on("click",".login-btn-qq",function(e){e.preventDefault(),NAV_UTIL.loginOauth("qq")}).on("click",".login-btn-weibo",function(e){e.preventDefault(),NAV_UTIL.loginOauth("weibo")}).on("click",".login-btn-wechat",function(e){e.preventDefault(),NAV_UTIL.loginOauth("weixin")}),this.view.on("click",".close",function(t){t.preventDefault(),e.close()})},open:function(){this.view.show()},close:function(){this.view.hide()}},tab={init:function(){var e=this,t=$("#J_huyaLoginBox");this.index=-1,this.navItem=t.find(".tab-btn"),this.unit=t.find(".tab-unit"),this.line=t.find(".J_line"),this.navItem.on("click",function(t){t.preventDefault(),e.go($(this).index())})},changeCallbacks:[],go:function(e){if(this.index!==e){this.index=e,this.navItem.removeClass("active").eq(e).addClass("active"),this.unit.hide().eq(e).show(),this.line.css("left",80*e);for(var t=0,n=this.changeCallbacks.length;n>t;t++)this.changeCallbacks[t](e)}},change:function(e){"function"==typeof e&&this.changeCallbacks.push(e)}},regTab={init:function(){var e=this;this.index=-1,this.unit=$(".register-tab"),$(".reg-by-phone").on("click",function(t){t.preventDefault(),e.go(0)}),$(".reg-by-mail").on("click",function(t){t.preventDefault(),e.go(1)})},go:function(e){if(this.index!==e){this.index=e,this.unit.hide().eq(e).show();var t=$("#J_huyaLoginBox").find(".J_loading");this.unit.find("iframe").each(function(n){var i=this;n===e?(t.show(),0===e?NAV_UTIL.registerPhone(function(e){i.src=e.url,t.hide()}):NAV_UTIL.registerMail(function(e){i.src=e.url,t.hide()})):i.src="about:blank"})}}};tab.change(function(e){var t=$("#J_huyaLoginBox").find(".J_loading");0===e?(t.show(),NAV_UTIL.udbLogin(function(){t.hide()})):$("#udbsdk_frm_normal").attr("src","about:blank")}),tab.change(function(e){1===e&&-1===regTab.index&&regTab.go(0)}),window.huya_login_box={init:function(){box.init(),tab.init(),regTab.init()},login:function(){box.open(),tab.go(0)},register:function(e){switch(box.open(),tab.go(1),e){case"EMAIL":regTab.go(1);break;default:regTab.go(0)}},close:function(){box.close()}}}(),TT.use$(function($){$(function(){function CreateProgressBar(e,t){var n="http://www.w3.org/2000/svg",i=50,a=.5*i,o=.5*i,s=.5*i,r=document.createElementNS(n,"svg:svg");r.setAttribute("width",i),r.setAttribute("height",i);var c=document.createElementNS(n,"circle"),l=document.createElementNS(n,"circle");c.setAttribute("cx",a),c.setAttribute("cy",o),c.setAttribute("r",s),c.setAttribute("fill","#CCCCCC"),l.setAttribute("cx",a),l.setAttribute("cy",a),l.setAttribute("r",s-2),l.setAttribute("fill","#FFFFFF");var u=e/t*Math.PI*2,d=0,p=d+u,h=a+s*Math.sin(d),f=o-s*Math.cos(d),v=a+s*Math.sin(p),g=o-s*Math.cos(p),m=p-d>Math.PI?1:0,_=["M "+a+","+o,"L "+h+","+f,"A "+s+","+s+" 0 "+m+" 1 "+v+","+g,"Z"].join(" "),b=document.createElementNS(n,"path");return b.setAttribute("d",_),b.setAttribute("fill","#ff8800"),r.appendChild(c),r.appendChild(b),r.appendChild(l),r}var isProd=!TT.type,isLogin=!!HUYA_UTIL.getCookieVal("yyuid");if(isLogin){var info=function(){TT.on("getUserInfoComplete",function(e,t){$("#J_huyaNavUserCardAvatarImg").attr("src",t.avatar),$("#J_huyaNavUserCardNick").empty().append("<span></span>").find("span").text(t.nick)},!0)};TT.on("userLvDataChange",function(e,t){!t.noble||2!=t.noble.nobleStatus&&3!=t.noble.nobleStatus||$("#J_huyaNavUserCardAvatar").append('<i class="noble-icon noble-level-'+t.noble.nobleLevel+'""></i>')});var CreateUserExper=function(e){function t(e){a.add(e)}function n(e){e=parseInt(e,10);var t=$.extend({},i);i.userExp+=e,i.userExp>=i.nextLevelExp&&(i.currLevelExp=i.nextLevelExp,i.nextLevelExp=i.next2LevelExp,i.userLevel+=1),i.levelProgress=(i.userExp-i.currLevelExp)/(i.nextLevelExp-i.currLevelExp)*100,a.fire(i,t)}var i={},a=$.Callbacks();for(var o in e)i[o]=parseInt(e[o],10);return{data:i,change:t,add:n}},userExper=null;TT.on("userLvDataChange",function(e,t){function n(e){$("#J_huyaNavUserCardExpFrom").text("Lv"+e.userLevel),$("#J_huyaNavUserCardExpTo").text("Lv"+(parseInt(e.userLevel,10)+1)),$("#J_huyaNavUserCardExpBar").css("width",e.levelProgress+"%"),$("#J_huyaNavUserCardExpText").text(e.userExp+"/"+e.nextLevelExp),$("#J_huyaNavUserCardNick").find(".level-icon").remove(),$("#J_huyaNavUserCardNick").append('<i class="level-icon level-icon'+e.userLevel+'"></i>')}t.level&&(userExper=CreateUserExper(t.level),n(userExper.data),userExper.change(n))}),TT.on("userLvDataChange",function(e,t){if(t.package){t=t.package;var e=parseInt(t[9],10)||0,n=parseInt(t[32],10)||0,i=parseInt(t[8],10)||0,a=function(e){return 1e4>e?e:1e8>e?(e/1e4).toFixed(1)+"\u4e07":(e/1e8).toFixed(1)+"\u4ebf"};$("#J_huyaNavUserCardAssetsGb").text(a(e)),$("#J_huyaNavUserCardAssetsTk").text(a(n)),$("#J_huyaNavUserCardAssetsSb").text(a(i))}});var task={get:function(e){return $.ajax({url:"http://"+(isProd?"":"test.")+"q.huya.com/yy/index.php?m=User&do=doGetTaskPrize",data:{taskId:e},dataType:"jsonp"})},container:$("#J_huyaNavUserCardTask")};task.novice={init:function(e){this.data=e,this.view=$(this.tpl({tasks:e})),this.bind(),task.container.append(this.view).removeClass("loading")},tpl:function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){if(__p+='<div class="task-mod task-novice">\r\n    <div class="mod-hd">\r\n        <p class="mod-tit">\u65b0\u624b\u4efb\u52a1</p>\r\n    </div>\r\n    <div class="mod-bd">\r\n    ',tasks.length){__p+='\r\n        <ul class="tasks">\r\n        ';for(var i=0,l=tasks.length;l>i;i++){var task=tasks[i];__p+='\r\n            <li>\r\n                <span class="task-icon" title="'+(null==(__t=task.desc)?"":__t)+'"><img src="'+(null==(__t=task.icon)?"":__t)+'" alt="icon" /></span>\r\n                <p class="task-name" title="'+(null==(__t=task.desc)?"":__t)+'">'+(null==(__t=task.name)?"":__t)+"</p>\r\n                ",__p+=task.progress>=task.targetLevel?task.awardPrize?'\r\n                        <a class="task-btn done" href="#">\u5df2\u5b8c\u6210</a>\r\n                ':'\r\n                        <a class="task-btn get J_get" data-id="'+(null==(__t=task.id)?"":__t)+'" href="#">\u9886\u53d6</a>\r\n                ':'\r\n                        <a class="task-btn ing" href="#"><i style="width:'+(null==(__t=task.progress/task.targetLevel*100)?"":__t)+'%;"></i><span>'+(null==(__t=task.progress)?"":__t)+"/"+(null==(__t=task.targetLevel)?"":__t)+"</span></a>\r\n                ",__p+="\r\n            </li>\r\n        "}__p+="\r\n        </ul>\r\n    "}else __p+="\r\n        <p>-- \u6682\u65e0\u4efb\u52a1 --</p>\r\n    ";__p+="\r\n    </div>\r\n</div>\r\n"}return __p},bind:function(){var e=this;this.view.on("click",".J_get",function(){var t=$(this),n=t.data("id");n&&!t.hasClass("disable")&&(t.addClass("disable"),task.get(n).always(function(){t.removeClass("disable")}).done(function(i){if(200==i.status)if(!i.data||0!=i.data.code&&910!=i.data.code)alert({913:"\u4efb\u52a1\u5df2\u4e0b\u7ebf",914:"\u4efb\u52a1\u672a\u5b8c\u6210"}[i.data.code]||"\u9886\u53d6\u5931\u8d25\uff01");else{t.removeClass("get J_get");var a=e.find(n);a&&a.exper?(t.addClass("active").text("EXP+"+a.exper),setTimeout(function(){t.removeClass("active").addClass("done").text("\u5df2\u5b8c\u6210")},1750),setTimeout(function(){userExper.add(a.exper)},1e3)):(t.addClass("done").text("\u5df2\u5b8c\u6210"),userExper.add(a.exper))}else alert(i.msg)}))})},find:function(e){var t=null;return $.each(this.data,function(n,i){return i.id==e?(t=i,!1):void 0}),t}},task.days={init:function(e){var t=this;this.data=e,this.index=0,this.maxIndex=e.length-1,this.view=$(this.tpl({tasks:e})),this.bind(),this.go(0),task.container.append(this.view).removeClass("loading"),$.each(e,function(e,n){if(!(n.progress>=n.targetLevel)){var i=null;try{$.isNumeric(n.progress/n.targetLevel)&&(i=CreateProgressBar(n.progress,n.targetLevel))}catch(a){}i&&t.view.find(".J_task").eq(e).find(".J_progress").append(i)}})},tpl:function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){if(__p+='<div class="task-mod task-days">\r\n    <div class="mod-hd">\r\n        <p class="mod-tit">\u6bcf\u65e5\u6210\u957f</p>\r\n        <a class="task-switch J_switch" href="#"><i></i><span>\u6362\u4e00\u6362</span></a>\r\n    </div>\r\n    <div class="mod-bd">\r\n    ',tasks.length){__p+='\r\n        <div class="tasks">\r\n        ';for(var i=0,l=tasks.length;l>i;i++){var task=tasks[i];__p+='\r\n            <div class="task J_task">\r\n                <div class="task-l">\r\n                    <div class="task-info">                                                \r\n                        <i class="task-icon"><img src="'+(null==(__t=task.icon)?"":__t)+'" alt="icon" /></i>\r\n                        <div class="task-details">\r\n                            <div class="task-tit">'+(null==(__t=task.name)?"":__t)+'</div>\r\n                            <div class="task-des">'+(null==(__t=task.desc)?"":__t)+'</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="task-r">\r\n                    <div class="task-status">\r\n                    ',__p+=task.progress>=task.targetLevel?task.awardPrize?'\r\n                        <i class="status status-done"></i>\r\n                    ':'\r\n                        <a class="status status-get J_get" data-id="'+(null==(__t=task.id)?"":__t)+'" href="#">\u9886\u53d6</a>\r\n                    ':'\r\n                        <div class="status status-ing J_progress">\r\n                            <p>'+(null==(__t=task.progress)?"":__t)+"/"+(null==(__t=task.targetLevel)?"":__t)+"</p>\r\n                        </div>\r\n                    ",__p+="\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        "}__p+="\r\n        </div>\r\n    "}else __p+="\r\n        <p>-- \u6682\u65e0\u4efb\u52a1 --</p>\r\n    ";__p+="\r\n    </div>\r\n</div>\r\n"}return __p},bind:function(){var e=this;this.view.on("click",".J_switch",function(t){t.preventDefault(),e.next()}),this.view.on("click",".J_get",function(){var e=$(this),t=e.data("id");t&&!e.hasClass("disable")&&(e.addClass("disable"),task.get(t).always(function(){e.removeClass("disable")}).done(function(t){200==t.status?!t.data||0!=t.data.code&&910!=t.data.code?alert({913:"\u4efb\u52a1\u5df2\u4e0b\u7ebf",914:"\u4efb\u52a1\u672a\u5b8c\u6210"}[t.data.code]||"\u9886\u53d6\u5931\u8d25\uff01"):e.replaceWith('<i class="status status-done"></i>'):alert(t.msg)}))})},next:function(){this.index===this.maxIndex?this.index=0:this.index++,this.go(this.index)},go:function(e){this.view.find(".J_task").hide().eq(e).show()}},TT.on("userLvDataChange",function(e,t){if(t.tasks&&t.tasks.length)switch(t.tasks[0].type){case 3:task.novice.init(t.tasks||[]);break;case 2:task.days.init(t.tasks||[])}}),TT.on("huyaHeaderDomReady",function(){var e=!1,t=null,n={get:function(){return e},set:function(){e=!0,clearTimeout(t),t=setTimeout(function(){e=!1
},1e4)}},i=!1;$(".nav-user-title").on("mouseenter",function(){info.executed||(info(),info.executed=!0),n.get()||i||(i=!0,task.container.empty().addClass("loading"),$.ajax({url:"http://"+(isProd?"":"test.")+"q.huya.com/index.php?m=User&do=listTotal",dataType:"jsonp",jsonpCallback:"huyaNavUserCard",cache:!0}).done(function(e){200===e.status?(n.set(),e.data&&TT.emit("userLvDataChange",e.data)):alert("\u83b7\u53d6\u6570\u636e\u5931\u8d25: "+e.msg)}).fail(function(e,t){alert("\u83b7\u53d6\u6570\u636e\u5931\u8d25: "+t)}).always(function(){i=!1}));try{ya.reportProductEvent({eid:"click/zhibo/userLvCard",eid_desc:"\u70b9\u51fb/\u76f4\u64ad\u95f4/\u7528\u6237\u7b49\u7ea7\u5361\u7247"})}catch(e){}})},!0),TT.on("huyaHeaderDomReady",function(e){function Letter(){function e(){i||($("body").append(n),i=!0),n.show()}function t(){n.hide()}var n=$(letter_tpl()),i=!1;n.on("click",".J_close",function(e){e.preventDefault(),t()}),this.open=e,this.close=t}var letter=null;$("#J_huyaUserLvIntro").on("click",function(e){e.preventDefault(),letter||(letter=new Letter),letter.open()}),TT.on("TTUserLvIntro",function(){letter||(letter=new Letter),letter.open()});var letter_tpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+='<div class="tt-letter">\r\n    <div class="tt-letter-base"></div>\r\n    <div class="tt-letter-paper">\r\n        <div class="tt-letter-cont">\r\n        <p>\u4eb2\u7231\u7684<em>'+(null==(__t=DUYA_INS.userNick)?"":__t)+'</em>\uff1a</p>\r\n        <p>\u4ece\u4eca\u5929\u8d77\uff0c\u4f60\u5c06\u62e5\u6709\u4e00\u4e2a\u5168\u65b0\u7684<em>\u864e\u7259\u7b49\u7ea7</em>\uff01</p>\r\n        <p>\u6211\u4eec\u4e3a\u4f60\u7684\u7b49\u7ea7\u63d0\u5347\u63d0\u4f9b\u4e86\u6700\u5168\u9762\u7684\u6307\u5f15\uff0c<em>\u5b8c\u6210\u65b0\u624b\u4efb\u52a1</em>\u540e\uff0c\u6bcf\u5929\u90fd\u4f1a\u6709\u4e0d\u540c\u7684\u4f53\u9a8c\u4efb\u52a1\uff0c\u5e2e\u52a9\u4f60\u66f4\u5feb\u7684\u878d\u5165\u864e\u7259\u5927\u5bb6\u5ead\u3002</p>\r\n        <p>\u540c\u65f6\uff0c\u6bcf\u5929\u767b\u5f55<em>\u770b\u76f4\u64ad\uff0c\u9886\u53d6\u5b9d\u7bb1</em>\uff0c\u6216\u8005<em>\u8d60\u9001\u793c\u7269</em>\u90fd\u53ef\u4ee5\u83b7\u5f97\u7b49\u7ea7\u6210\u957f\u7684\u7ecf\u9a8c\u503c\uff0c\u603b\u6709\u4e00\u79cd\u9002\u5408\u4f60\u3002</p>\r\n        <p>\u4e0d\u8fc7\uff0c<em>\u7b49\u7ea7\u7ecf\u9a8c\u503c\u63d0\u5347\u6bcf\u5929\u4f1a\u6709200\u70b9\u4e0a\u9650</em>\uff0c\u8bf7\u5728\u4eab\u53d7\u76f4\u64ad\u8fc7\u7a0b\u4e2d\u5faa\u5e8f\u6e10\u8fdb\uff0c\u805a\u6c99\u6210\u5854\u3002</p>\r\n        <p>\u968f\u7740\u7b49\u7ea7\u7684\u63d0\u5347\uff0c\u4f60\u5c06\u62e5\u6709\u8d8a\u6765\u8d8a\u591a\u7684\u7279\u6743\uff1a<br />\r\n        <em>\u50b2\u89c6\u7fa4\u96c4</em>\u2014\u2014\u9ad8\u7b49\u7ea7\u7528\u6237\u5728\u76f4\u64ad\u95f4\u89c2\u4f17\u5217\u8868\u6392\u5e8f\u8d8a\u9760\u524d\uff1b<br />\r\n        <em>\u4e00\u8bed\u60ca\u4eba</em>\u2014\u2014\u9ad8\u7b49\u7ea7\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u66f4\u4e30\u5bcc\u7684\u5f39\u5e55\u989c\u8272\uff0c\u5e76\u4e14\u65e0\u6b21\u6570\u9650\u5236<br />\r\n        <em>\u552f\u6211\u72ec\u5c0a</em>\u2014\u2014\u9ad8\u7b49\u7ea7\u7528\u6237\u7684\u5f39\u5e55\u53ef\u4ee5\u5728\u89c6\u9891\u533a\u5c45\u4e2d\u663e\u793a\uff0c\u5f70\u663e\u4e2a\u6027\uff0c\u4e0e\u4f17\u4e0d\u540c<br />\r\n        <em>\u4eab\u5c3d\u8363\u534e</em>\u2014\u2014\u9ad8\u7b49\u7ea7\u7528\u6237\u6bcf\u5929\u5f00\u542f\u767e\u5b9d\u7bb1\u53ef\u4ee5\u83b7\u5f97\u66f4\u591a\u4e30\u539a\u5956\u52b1<br />\r\n        </p>\r\n        </div>\r\n    </div>\r\n    <div class="tt-letter-envelope"></div>\r\n    <div class="tt-letter-baffle"></div>\r\n    <span class="tt-letter-close J_close">\u5173\u95ed</span>\r\n</div>';return __p}},!0)}})}),TT.use$(function($){function showNotice(e){function t(e){huya_crossStorage.getItem(e,function(t){t||huya_crossStorage.setItem(e,1)})}function n(){setTimeout(function(){l.remove()}),a&&clearInterval(a),huya_crossStorage.removeItem(key+c)}var i=60,a=null,o=e.data,s=e.afterCreatedBox||function(){},r="object"==typeof o?o:$.parseJSON(o),c=r.eventId,l=$(liveNoticeTmpl({data:r}));l.appendTo("body").animate({bottom:5}).on("click",".notice-close,.notice-btn",function(){n()}),s(l),a=setInterval(function(){if(i--,i>=1){var e=" "+i;l.find(".js-notice-time").text(e)}else n()},1e3),t(key+c)}var liveNoticeTmpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-head-notice">\r\n    <div class="notice-hd">\r\n        <i class="notice-icon"></i>\r\n        <span class="notice-title">\u76f4\u64ad\u901a\u77e5</span>\r\n        <span class="notice-tip"><span class="js-notice-time">10</span>s\u540e\u81ea\u52a8\u5173\u95ed</span>\r\n        <a class="notice-close" title="\u5173\u95ed\u5f39\u7a97"></a>\r\n    </div>\r\n    <div class="notice-bd">\r\n        ',data.image&&(__p+='\r\n            <div class="notice-pic">\r\n                <img src="'+(null==(__t=data.image)?"":__t)+'"> \r\n            </div>\r\n        '),__p+='\r\n        <div class="notice-text">\r\n            <h2 class="anchor-name">'+(null==(__t=data.title)?"":__t)+"</h2>\r\n            ",data.nick&&(__p+='<h3 class="anchor-nick" title="'+(null==(__t=data.nick)?"":__t)+'">'+(null==(__t=data.nick)?"":__t)+"</h3>"),__p+='\r\n            <p class="notice-content" title="'+(null==(__t=data.content)?"":__t)+'">\r\n                '+(null==(__t=data.content)?"":__t)+'\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <a class="notice-btn" href="'+(null==(__t=data.action)?"":__t)+'" target="_blank">\u9a6c\u4e0a\u89c2\u770b</a>\r\n</div>';return __p},key="huya_liveNotice";huya_crossStorage.change(function(e){new RegExp(key).test(e.key)&&null==e.newValue&&$("#"+e.key).remove()}),window.HUYA_HEAD_liveNotice=function(e){showNotice({data:e,afterCreatedBox:function(){DUYA_SUB.publish("INDEX_LIVE_NOTICE",e.eventId)}})},window.HUYA_SUBSCRIBE_PUSH=function(e){if(!$.isEmptyObject(e))for(var t in e){var n=e[t],i={title:"\u4f60\u8ba2\u9605\u7684\u4e3b\u64ad: ",content:(n.introduction?'\u5728\u64ad"'+n.introduction+'"':"\u6b63\u5728\u5f00\u64ad\u5566,")+"\u5feb\u62a2\u4e2a\u677f\u51f3\u5750\u597d",image:n.avatar180,action:TT.app.main+n.privateHost,eventId:n.aid,nick:n.nick};showNotice({data:i,afterCreatedBox:function(e){e.addClass("subscribe-notice"),e.find(".notice-close").addClass("clickstat").attr({eid:"click/dytc/close",eid_desc:"\u70b9\u51fb/\u8ba2\u9605\u5f39\u7a97/\u5173\u95ed"}),e.find(".notice-btn").addClass("clickstat").attr({eid:"click/dytc/in",eid_desc:"\u70b9\u51fb/\u8ba2\u9605\u5f39\u7a97/\u8fdb\u5165\u76f4\u64ad\u95f4"})}})}},window.HUYA_NOTICE_PUSH=function(e){showNotice({data:e,afterCreatedBox:function(e){e.addClass("normal-notice")}})}}),TT.use$(function(e){var t=window.HUYA_UTIL,n=TT.isProd?"http://fw.huya.com/":"http://test.fw.huya.com/",i={isHuyaLiveRoom:/^\/([A-Za-z0-9]{2,})(|\/)$/.test(location.pathname),isHuyaIndex:location.href==TT.app.main},a={userSubscribeList:[],cacheObj:{},isShowRefreshTips:!1,getSubSt:null,getAllLiveSt:null,tips_left:0,refreshPush:function(e){window.HUYA_SUBSCRIBE_PUSH&&window.HUYA_SUBSCRIBE_PUSH(e)},getUserSubscribe:function(){var t=this;e.ajax({url:n+"dispatch?do=userSubscribeAid&uid="+DUYA_INS.userId,type:"GET",dataType:"jsonp",success:function(e){1e3==e.status&&(t.userSubscribeList=e.result.list||[])}})},getNewestLive:function(){var t=this;e.ajax({url:n+"dispatch?do=newestLive&time=120",type:"GET",dataType:"jsonp",success:function(e){if(1e3==e.status){var n=t.mapSubscribeList(e.result,t.userSubscribeList);t.refreshPush(n)}}})},mapSubscribeList:function(t,n){var i=this,a={};for(var o in t)for(var s=0,r=n.length;r>s;s++)o.toString()==n[s].toString()&&(a[o]=t[o]);if(!e.isEmptyObject(i.cacheObj))for(var c in a)"undefined"!=typeof i.cacheObj[c]&&delete a[c];return i.cacheObj=a,a},init:function(n){var i=this,a=e(".duya-header-tips");a.on("click",".refresh-current",function(){e(this).parent("p").remove(),0==e(".refresh-tips p").length&&a.removeClass("appear-tips")}).on("change","#checkTips",function(){if(e(this).attr("checked")){var n=new Date;n.setTime(n.getTime()+864e5),t.writeCookie("stopPushSub","1",TT.domainForWriteCookie,"/",n),e("#refresh-wrap").remove(),i.isShowRefreshTips||(a.removeClass("appear-tips"),i.isShowRefreshTips=!0)}}).on("click",".close-tips",function(){a.removeClass("appear-tips")}),"1"==t.hasCookie("stopPushSub")&&a.find("#refresh-wrap").remove(),"1"!=t.hasCookie("stopPushSub")&&DUYA_INS.islogin&&!location.host.match("admin.huya.com")&&(i.getSubSt=setTimeout(function(){i.getUserSubscribe(),clearTimeout(i.getSubSt),i.getSubSt=setInterval(function(){i.getUserSubscribe()},6e5)},59e3),n||(i.getAllLiveSt=setInterval(function(){i.getNewestLive()},61e3))),e(window).on("scroll",function(){e(".duya-header-tips").length>0&&e(".duya-header-tips").hasClass("appear-tips")&&(e(window).scrollTop()>e("#duya-header").height()?a.css({position:"fixed",top:"45px",left:i.tips_left}):a.attr("style",""))}),this.initRefreshTips()},initRefreshTips:function(){var t=this,n=e(".duya-header-tips");n.on("click",".tips-top .refresh-current",function(){location.reload()}).on("click",".close-tips",function(){n.removeClass("appear-tips")}),i.isHuyaLiveRoom||i.isHuyaIndex||setTimeout(function(){n.addClass("appear-tips").find(".tips-top").show(),t.tips_left=n.offset().left,t.isShowRefreshTips=!0},18e5)}};window.DUYA_PUSH=a}),function(){var e=window.HUYA_UTIL;window.NAV_INDEX=window.NAV_INDEX||"http://"+window.location.host+"/",window.NAV_UTIL={login:function(){huya_login_box.login()},udbLogin:function(e){t.prototype.getUDB(function(){$.post(NAV_INDEX+"udb_web/authorizeURL.php?do=authorizeEmbedURL",{callbackURL:NAV_INDEX+"udb_web/udbport2.php?do=callback"},function(t){UDB.sdk.PCWeb.embedOpenLgn(t,NAV_INDEX+"udb_web/udbport2.php?do=callback"),"function"==typeof e&&e()},"json")})},UDBLoginCallback:function(){huya_login_box.close()},logout:function(){t.prototype.getUDB(function(){$.get(NAV_INDEX+"udb_web/udbport2.php?do=logout",{},function(e,t){"success"==t&&UDB.sdk.PCWeb.deleteCrossmainCookieWithCallBack(e,function(){window.location.reload()})})})},getStatus:function(n){var i=t.prototype;"undefined"!=typeof i.islogin?e.isFunction(n)&&n():i.getUDB(function(){$.getJSON(NAV_INDEX+"udb_web/checkLogin.php",function(t){i.islogin=t.isLogined,i.userName=t.userName,i.userNick=t.userNick,i.userLogo=t.userLogo,i.userId=t.uid,window.a_userIsLogin=i.islogin,window.a_userName=i.userName,e.isFunction(n)&&n()})})},getUserName:function(){return $.getJSON(NAV_INDEX+"udb_web/udbport2.php?do=checkUserNick")},getUserAvatar:function(){var t=!0;return $.ajax({url:"http://"+(t?"":"test.")+"user.huya.com/user/getUserInfo",data:{uid:e.getCookieVal("yyuid")},dataType:"jsonp",cache:!0})},setLoginInfo:function(){var e=t.prototype,n=this;e.getUDB(function(){n.getStatus(function(){if(""!=e.userName||e.islogin){$("#duya-header .success-login").show();var t=e.userNick?$.Deferred().resolve([{}]):n.getUserName();$.when(n.getUserAvatar(),t).done(function(t,n){var i=t[0],a=n[0];if(a&&i&&200==i.code)e.userNick=a.userNick||e.userNick,e.userLogo=i.data&&i.data.avatar||a.userLogo||e.userLogo||"http://a.dwstatic.com/huya/main/img/10001.jpg";else{e.userNick||(e.userNick=e.userName),e.userLogo||(e.userLogo="http://a.dwstatic.com/huya/main/img/10001.jpg");try{console.log("\u516c\u5171\u5934\u83b7\u53d6\u7528\u6237\u6570\u636e\u5f02\u5e38")}catch(o){}}}).fail(function(){e.userNick||(e.userNick=e.userName),e.userLogo||(e.userLogo="http://a.dwstatic.com/huya/main/img/10001.jpg");try{console.log("\u516c\u5171\u5934\u83b7\u53d6\u7528\u6237\u6570\u636e\u5931\u8d25")}catch(t){}}).always(function(){$("#login-username").attr("title",e.userNick).text(e.userNick),$("#login-userAvatar").attr("src",e.userLogo),DUYA_SUB.publish("getUserInfoComplete",{name:e.userName,nick:e.userNick,avatar:e.userLogo})}),DUYA_PUSH.init(!0)}else $("#duya-header .un-login").show()})})},isLogin:function(){return e.hasCookie("username")},getUserInfo:function(){return e.hasCookie("username")?{uName:e.getCookieVal("username"),yyID:e.getCookieVal("yyuid")}:null},checkLogin:function(n){var i=t.prototype,a=this;i.getUDB(function(){a.getStatus(function(){i.islogin?e.isFunction(n)&&n(i.userId,i.userName):a.login()})})},check:function(n){var i=t.prototype,a=this;i.getUDB(function(){a.getStatus(function(){var t={};e.isFunction(n)&&(t.isLogined=i.islogin,t.userName=i.userName,n(t))})})},reloadPage:function(){null!=this.minWindow&&this.minWindow.close(),window.location.reload()},loginOauth:function(e){var t=NAV_INDEX+"udb_web/udbport2.php?do=dummy3AuthorizeURL&loginType="+e;this.minWindow=window.open(t,"_blank"),this.minWindow.focus()},registerPhone:function(e,t){$.ajax({url:NAV_INDEX+"udb_web/udbport2.php?do=registerEmbedURL&registerUrl=https://zc.yy.com/reg/udb/reg4udb.do&type=Mobile",type:"post",dataType:"json"}).done(function(n){"1"==n.success?e&&e(n):t&&t(n)})},registerMail:function(e,t){$.ajax({url:NAV_INDEX+"/udb_web/udbport2.php?do=registerEmbedURL&registerUrl=https://zc.yy.com/reg/udb/reg4udb.do&type=Email",type:"post",dataType:"json"}).done(function(n){"1"==n.success?e&&e(n):t&&t(n)})},minWindow:null};var t=function(){this.init()};t.prototype.getUDB=function(t){"undefined"!=typeof UDB?e.isFunction(t)&&t():e.getScript("http://res.udb.duowan.com/lgn/js/oauth/udbsdk/pcweb/udb.sdk.pcweb.embed.min.js?_=2333",function(){try{window.UDB.sdk.PCWeb.initialize()}catch(n){}e.isFunction(t)&&t()})},t.prototype.headEven=function(){var t=($(".login-box").find(".login-loading"),$("#duya-header"));$(".J_gNavLogin").on("click",function(t){e.getCookieVal("yyuid")||(t.preventDefault(),NAV_UTIL.login())}),t.find("#nav-login").click(function(e){e.preventDefault(),huya_login_box.login()}),t.find("#nav-regiest").click(function(e){e.preventDefault(),huya_login_box.register()}),t.find("#nav-loggout").click(function(e){e.preventDefault(),NAV_UTIL.logout()})},t.prototype.initUDB=function(){var e=this;e.getUDB(function(){NAV_UTIL.setLoginInfo(),e.headEven()}),huya_login_box.init()},t.prototype.myMessageShow=function(){var e=$("#J_huyaNavUserMsgDot");e.show(),$("#J_huyaNavUserMsg").off("click").on("click",function(){e.hide()})},t.prototype.myMessageHide=function(){$("#J_huyaNavUserMsgDot").hide()},t.prototype.init=function(){var t=this;DUYA_SUB.publish("huyaHeaderDomReady"),window.jQuery?t.initUDB():e.getScript("http://assets.dwstatic.com/b=common/js&f=jquery-1.11.1.min.js,jquery-migrate-1.2.1.min.js&20141230",function(){t.initUDB()})},window.DUYA_INS=new t}(),!function(){function centerOnScreen(e){var t=($(window).width()-e.width())/2,n=($(window).height()-e.height())/2;return e.css({left:t+"px",top:n+"px"}),e}function showBrowserTip(){if($.browser.msie&&7>=$.browser.version&&"1"!=HUYA_UTIL.hasCookie("browserUpDate")){var expiretime=new Date;if(expiretime.setTime(expiretime.getTime()+864e5),HUYA_UTIL.writeCookie("browserUpDate","1",TT.domainForWriteCookie,"/",expiretime),0==$(".browser-box").length){var sHtml=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-header-box browser-box">\r\n    <div class="hd">\r\n        <div class="tip">\u6e29\u99a8\u63d0\u793a</div>\r\n        <i class="close"></i>\r\n    </div>\r\n    <div class="bd">\r\n        <div class="browser">   \r\n            <div class="title-pic"></div>\r\n            <div class="desc">\r\n                \u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\uff0c\u5bfc\u81f4\u7f51\u7ad9\u90e8\u5206\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u663e\u793a\uff0c\u5efa\u8bae\u5347\u7ea7\u4e3a\uff1a\r\n            </div>\r\n            <ul class="browser-list clearfix">\r\n                <li class="browser-item browser-sougou">\r\n                    <div class="pic">\r\n                        <a class="link" href="http://ie.sogou.com/" target="_blank" ></a>\r\n                        <p class="name">\u641c\u72d7\u6d4f\u89c8\u5668\u6700\u65b0\u7248</p>\r\n                    </div>\r\n                    <a class="download" href="http://ie.sogou.com/" target="_blank">\u4e0b\u8f7d</a>\r\n                </li>\r\n                <li class="browser-item browser-chrome">\r\n                    <div class="pic">\r\n                        <a class="link" href="http://www.google.cn/chrome/browser/desktop/index.html" target="_blank"></a>\r\n                        <p class="name">Chrome\u6d4f\u89c8\u5668\u6700\u65b0\u7248</p>\r\n                    </div>\r\n                    <a class="download" href="http://www.google.cn/chrome/browser/desktop/index.html" target="_blank">\u4e0b\u8f7d</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';return __p},$elem=$(sHtml());$("body").append($elem),centerOnScreen($elem).show(),$(window).on("resize",function(){$elem.is(":visible")&&centerOnScreen($elem)}),$(document).on("click",".browser-box .close",function(){$(".browser-box").hide()})}else $(".browser-box").show()}}showBrowserTip()}();